$(document).ready(function(){var e={settings:{processor:$(".inline-processing"),date_element:$("#date-start"),frequency_value:$("#reminder-frequency"),edit_area:$(".edit-reminder-area"),complete_area:$(".complete-reminder-area"),existing_reminder:!1},calculateNextDate:function(e,t){var n=parseInt(t.attr("data-frequency")),r=t.attr("data-frequency-type"),a=$("html").attr("lang")||"en-US",i=new Date(e);"day"===r?i.setDate(i.getDate()+n):"month"===r&&i.setMonth(i.getMonth()+n);var s=i.toLocaleDateString(a);return s},checkDateField:function(){var t=Date.parse(e.settings.date_element.val());return t},clearFormValues:function(){e.settings.date_element.val(null),e.settings.frequency_value.prop("selectedIndex",0).trigger("change")},deleteReminder:function(){e.toggleProcessor(e.processReminderDeleteForm)},processReminderDeleteForm:function(){return e.settings.existing_reminder=!1,setTimeout(e.showResetForm,2e3),!1},processReminderFrequencyForm:function(){e.settings.existing_reminder=!0,setTimeout(e.showReminderConfirmation,2e3)},setFrequencyMessage:function(){var t=e.checkDateField(),n=e.settings.frequency_value.find("option:selected"),r=e.settings.frequency_value.attr("value"),a=$("#reminder-dates");if(t&&r&&"0"!==n.attr("data-frequency")){var i=e.calculateNextDate(t,n);$("#reminder-start").text(e.settings.date_element.val()),$("#reminder-next").text(i),a.hasClass("active")||a.slideDown("fast",function(){$(this).addClass("active")})}else a.slideUp("fast",function(){$(this).removeClass("active")})},showCorrectCancelScreen:function(){e.settings.existing_reminder?e.settings.edit_area.fadeOut(300,function(){e.settings.complete_area.fadeIn(300)}):e.settings.edit_area.fadeOut(300,function(){$(".set-reminder-area").fadeIn(300)})},showEditReminderForm:function(){e.settings.complete_area.fadeOut(300,function(){e.settings.edit_area.fadeIn(300)})},showReminderConfirmation:function(){e.settings.edit_area.fadeOut(300,function(){e.settings.complete_area.fadeIn(300,function(){e.toggleProcessor()})})},showResetForm:function(){e.settings.complete_area.fadeOut(300,function(){$(".set-reminder-area").fadeIn(300,function(){$(".delete-reminder-area").fadeOut(300),e.toggleProcessor(),e.clearFormValues()})})},submitReminderFrequency:function(){var t=e.validateReminderFrequency();return t&&e.toggleProcessor(e.processReminderFrequencyForm),!1},toggleProcessor:function(t){var n=e.settings.processor;n.hasClass("active")?n.fadeOut("fast",function(){n.removeClass("active")}):n.fadeIn("fast",function(){n.addClass("active")}),t&&t()},validateReminderFrequency:function(){var t=!0,n=e.checkDateField(),r=e.settings.frequency_value.val();return $(".field-validation-error").css("display","none"),n||($("#date-error").show(),t=!1),r||($("#frequency-error").show(),t=!1),t},init:function(){$("#set-reminder-frequency").on("submit",e.submitReminderFrequency),$(".edit-reminder").on("click",e.showEditReminderForm),$("#delete-reminder").on("submit",e.deleteReminder),$(".cancel-action").on("click",e.showCorrectCancelScreen),$('[data-role="date-calc"]').on("change",e.setFrequencyMessage)}};e.init()});