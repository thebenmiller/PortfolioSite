var jsfeat_face=function(a){var e,t,r,n,g,i,s=a.width,c=a.height;"VIDEO"==a.tagName||"IMG"==a.tagName?(t=document.createElement("canvas"),t.height=c,t.width=s,r=t.getContext("2d")):"CANVAS"==a.tagName&&(r=a.getContext("2d")),e=new jsfeat.matrix_t(s,c,jsfeat.U8_t|jsfeat.C1_t),n=new Int32Array((s+1)*(c+1)),g=new Int32Array((s+1)*(c+1)),i=new Int32Array((s+1)*(c+1));var o=jsfeat.haar.frontalface;this.findFace=function(){"VIDEO"!=a.tagName&&"IMG"!=a.tagName||r.drawImage(a,0,0);var t=r.getImageData(0,0,s,c);jsfeat.imgproc.grayscale(t.data,e.data),jsfeat.imgproc.equalize_histogram(e,e),jsfeat.imgproc.compute_integral_image(e,n,g,null);var f=jsfeat.haar.detect_multi_scale(n,g,i,null,e.cols,e.rows,o,1.15,2);f=jsfeat.haar.group_rectangles(f,1);var m=f.length;if(m>0){for(var h=f[0],l=1;l<m;l++)f[l].neighbors>h.neighbors?h=f[l]:f[l].neighbors==h.neighbors&&f[l].confidence>h.confidence&&(h=f[l]);return[h]}return!1}};